<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico Estratégico - JM Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: "Calm Confidence" - Soft off-white (#F8F7F4), deep reassuring blue (#1E3A8A), and a warm, encouraging orange (#F97316) for accents and progress. -->
    <!-- Application Structure Plan: A "Guided Journey" structure. The multi-step form is retained but reframed as a collaborative diagnostic session. The information architecture now includes a visual "Path" indicator at the top, replacing the simple text indicator. This gives users a clear mental map of the process, reducing cognitive load and the feeling of being "lost" in a form. The copy is conversational to build rapport, and animations are added to make transitions feel seamless and rewarding, encouraging completion. -->
    <!-- Visualization & Content Choices: Report Info: Questionnaire sections -> Goal: Guided Data Collection & Engagement -> Viz/Presentation Method: An animated, conversational multi-step form with visual progress indicators. -> Interaction: Smooth, animated step transitions, encouraging micro-copy that changes with progress, and a clear, focused final submission step. -> Justification: This design moves beyond a simple form to an "experience." It uses UX principles (like goal-gradient effect via the progress bar and clear signposting) to motivate the user. The color psychology aims to build trust and reduce form-filling fatigue. -> Library/Method: Vanilla JS, enhanced with CSS transitions for a fluid feel. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #F8F7F4;
        }
        .form-section {
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            transform: translateY(20px);
        }
        .form-section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        input:focus, select:focus, textarea:focus {
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3);
            border-color: #F97316;
        }
        .path-step {
            transition: all 0.4s ease-in-out;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="text-slate-900">

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl min-h-screen flex flex-col justify-center">
        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-900">JM Analytics</h1>
            <p class="text-slate-600 mt-1">Diagnóstico Estratégico</p>
        </header>

        <main class="bg-white p-6 sm:p-10 rounded-2xl shadow-2xl shadow-slate-300/30">
            
            <div id="path-container" class="mb-8">
                <div class="flex justify-between items-center">
                    <div id="step-1-indicator" class="path-step flex-1 text-center">
                        <div class="text-xs text-slate-500">Estrutura</div>
                    </div>
                    <div class="flex-1 h-px bg-slate-200"></div>
                    <div id="step-2-indicator" class="path-step flex-1 text-center opacity-40">
                        <div class="text-xs text-slate-500">Equipe</div>
                    </div>
                     <div class="flex-1 h-px bg-slate-200"></div>
                    <div id="step-3-indicator" class="path-step flex-1 text-center opacity-40">
                         <div class="text-xs text-slate-500">Sistemas</div>
                    </div>
                     <div class="flex-1 h-px bg-slate-200"></div>
                    <div id="step-4-indicator" class="path-step flex-1 text-center opacity-40">
                         <div class="text-xs text-slate-500">Desafios</div>
                    </div>
                </div>
                <div class="w-full bg-slate-200 rounded-full h-1.5 mt-2">
                    <div id="progress-bar" class="bg-orange-500 h-1.5 rounded-full transition-all" style="width: 12.5%"></div>
                </div>
                <div id="step-indicator-text" class="text-center text-sm text-orange-600 font-medium mt-3 h-5"></div>
            </div>

            <form id="briefing-form">
                
                <div id="step-0" class="form-section active">
                    <h2 class="text-2xl font-bold mb-4 text-center text-blue-900">Vamos construir o futuro da sua gestão, juntos.</h2>
                    <p class="text-slate-600 text-center mb-8 max-w-2xl mx-auto">Este diagnóstico rápido é o nosso ponto de partida. Suas respostas nos ajudarão a entender seus desafios para que possamos desenhar uma solução sob medida. </p>
                </div>

                <div id="step-1" class="form-section">
                    <h2 class="text-xl font-semibold mb-6 text-blue-900">Primeiro, vamos conhecer sua unidade.</h2>
                    <div class="space-y-6">
                        <div>
                            <label for="unidade_nome" class="block text-sm font-medium text-slate-700 mb-1">Nome da Unidade</label>
                            <input type="text" id="unidade_nome" name="unidade_nome" placeholder="Qual o nome que todos conhecem?" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                        <div>
                            <label for="unidade_porte" class="block text-sm font-medium text-slate-700 mb-1">Porte da Unidade</label>
                            <input type="text" id="unidade_porte" name="unidade_porte" placeholder="Ex: UPA Porte II, Hospital de pequeno porte" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                        <div>
                            <label for="unidade_atendimentos" class="block text-sm font-medium text-slate-700 mb-1">Volume médio de atendimentos por dia</label>
                            <input type="number" id="unidade_atendimentos" name="unidade_atendimentos" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                        <div>
                            <label for="unidade_turnos" class="block text-sm font-medium text-slate-700 mb-1">Como os turnos são divididos?</label>
                            <input type="text" id="unidade_turnos" name="unidade_turnos" placeholder="Ex: 2 turnos de 12h, 3 de 8h" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                         <div>
                            <label for="unidade_consultorios" class="block text-sm font-medium text-slate-700 mb-1">Média de consultórios em operação por turno</label>
                            <input type="number" id="unidade_consultorios" name="unidade_consultorios" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                    </div>
                </div>

                <div id="step-2" class="form-section">
                    <h2 class="text-xl font-semibold mb-6 text-blue-900">Agora, sobre o coração da sua operação: a equipe.</h2>
                    <div class="space-y-6">
                        <div>
                            <label for="equipe_medicos" class="block text-sm font-medium text-slate-700 mb-1">Total de médicos no corpo clínico</label>
                            <input type="number" id="equipe_medicos" name="equipe_medicos" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                        <div>
                            <label for="equipe_outros" class="block text-sm font-medium text-slate-700 mb-1">Total de outros profissionais (enfermagem, etc.)</label>
                            <input type="number" id="equipe_outros" name="equipe_outros" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Qual o nível de conforto da equipe com tecnologia?</label>
                            <div class="space-y-2">
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="equipe_familiaridade" value="Básico" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Básico (Ainda se adaptando)</span>
                                </label>
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="equipe_familiaridade" value="Intermediário" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Intermediário (Usa com confiança)</span>
                                </label>
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="equipe_familiaridade" value="Avançado" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Avançado (Adoram novas ferramentas)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step-3" class="form-section">
                    <h2 class="text-xl font-semibold mb-6 text-blue-900">Vamos falar sobre suas ferramentas atuais.</h2>
                    <div class="space-y-6">
                         <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Sua unidade possui computadores com internet nos pontos-chave?</label>
                            <div class="flex gap-4">
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg flex-1 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="infra_computadores" value="Sim" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Sim, em todos</span>
                                </label>
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg flex-1 has-[:checked]:bg-red-50 has-[:checked]:border-red-300 transition-all cursor-pointer">
                                    <input type="radio" name="infra_computadores" value="Não" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Não, ou em poucos</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">Como a passagem de plantão funciona hoje?</label>
                            <select name="infra_processo_atual" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all">
                                <option>Livro de ocorrências em papel</option>
                                <option>Planilha (Excel, Google Sheets)</option>
                                <option>Grupo de WhatsApp</option>
                                <option>Apenas verbalmente</option>
                                <option>Outro software</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">A unidade possui equipe de TI própria?</label>
                             <div class="flex gap-4">
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg flex-1 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="infra_ti" value="Sim" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Sim, própria</span>
                                </label>
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg flex-1 has-[:checked]:bg-blue-50 has-[:checked]:border-blue-300 transition-all cursor-pointer">
                                    <input type="radio" name="infra_ti" value="Terceirizada" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Sim, terceirizada</span>
                                </label>
                                <label class="flex items-center p-3 bg-slate-50 border border-slate-200 rounded-lg flex-1 has-[:checked]:bg-red-50 has-[:checked]:border-red-300 transition-all cursor-pointer">
                                    <input type="radio" name="infra_ti" value="Não" class="h-4 w-4 text-orange-600 border-slate-300 focus:ring-orange-500">
                                    <span class="ml-3 text-sm text-slate-700">Não possui</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="step-4" class="form-section">
                    <h2 class="text-xl font-semibold mb-6 text-blue-900">Por fim, seus maiores desafios e objetivos.</h2>
                    <div class="space-y-6">
                        <div>
                            <label for="desafios_gargalo" class="block text-sm font-medium text-slate-700 mb-1">Qual é o maior gargalo ou risco que você vê no processo atual?</label>
                            <textarea id="desafios_gargalo" name="desafios_gargalo" rows="3" placeholder="Ex: Perda de informações sobre pacientes, demora na comunicação..." class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all"></textarea>
                        </div>
                        <div>
                            <label for="desafios_problema_um" class="block text-sm font-medium text-slate-700 mb-1">Se pudesse resolver apenas UM problema com uma varinha mágica, qual seria?</label>
                            <textarea id="desafios_problema_um" name="desafios_problema_um" rows="3" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all"></textarea>
                        </div>
                        <div>
                            <label for="desafios_objetivos" class="block text-sm font-medium text-slate-700 mb-1">O que você mais espera alcançar com uma nova solução?</label>
                            <textarea id="desafios_objetivos" name="desafios_objetivos" rows="3" placeholder="Ex: Mais segurança, agilidade para a equipe, dados para gestão..." class="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg transition-all"></textarea>
                        </div>
                    </div>
                </div>

                <div id="step-5" class="form-section">
                    <h2 class="text-xl font-semibold mb-4 text-blue-900">Tudo pronto. Vamos revisar?</h2>
                    <p class="text-slate-600 mb-6">Confira se as informações estão corretas. Este é o resumo do nosso diagnóstico inicial.</p>
                    <div id="summary" class="space-y-4 text-sm bg-slate-50 p-6 rounded-lg border border-slate-200 mb-6"></div>
                    <button id="send-btn" type="button" class="w-full bg-blue-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-900 transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-800/20">
                        Confirmar e Preparar Envio
                    </button>
                    <div id="send-options" class="mt-4 hidden">
                        <p class="text-center text-sm text-slate-600 mb-3">Excelente! Agora clique para enviar via WhatsApp:</p>
                        <div class="flex justify-center">
                             <a id="whatsapp-link" target="_blank" class="w-full sm:w-2/3 bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition-all flex items-center justify-center gap-2 shadow-md">
                                Enviar por WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
                
                <div id="step-6" class="form-section text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full mx-auto flex items-center justify-center">
                        <span class="text-3xl">🎉</span>
                    </div>
                    <h2 class="text-2xl font-bold mt-4 text-blue-900">Diagnóstico Concluído!</h2>
                    <p class="text-slate-600 mt-2 max-w-lg mx-auto">Obrigado por sua colaboração. A equipe da JM Analytics já está um passo à frente para desenhar a solução ideal para você.</p>
                </div>
            </form>

            <div id="navigation-buttons" class="mt-10 pt-6 border-t border-slate-200 flex justify-between items-center">
                <button id="prev-btn" type="button" class="bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed">Voltar</button>
                <button id="next-btn" type="button" class="bg-orange-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-orange-600 transition-all shadow-lg shadow-orange-500/20">Avançar</button>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let currentStep = 0;
            const formSteps = document.querySelectorAll('.form-section');
            const totalStepsForProgress = formSteps.length - 2;
            const progressBar = document.getElementById('progress-bar');
            const stepIndicatorText = document.getElementById('step-indicator-text');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const navButtons = document.getElementById('navigation-buttons');
            const sendBtn = document.getElementById('send-btn');
            const sendOptions = document.getElementById('send-options');
            const whatsappLink = document.getElementById('whatsapp-link');

            const JM_ANALYTICS_WHATSAPP = '5535999706921';
            
            const encouragingMessages = [
                "",
                "Ótimo começo! Estamos entendendo sua estrutura.",
                "Perfeito. As pessoas são a chave de tudo.",
                "Entendido. Conhecer as ferramentas atuais é fundamental.",
                "Estamos quase lá! Seus desafios nos guiam para a solução.",
                "Tudo pronto para sua revisão.",
                ""
            ];

            function updateFormView() {
                formSteps.forEach((step, index) => {
                    step.classList.toggle('active', index === currentStep);
                });

                const progress = currentStep > 0 ? (currentStep - 1) : 0;
                const progressPercentage = (progress / (totalStepsForProgress -1)) * (100 - (100/totalStepsForProgress)) + (100/totalStepsForProgress)/2;
                progressBar.style.width = `${Math.min(100, progressPercentage)}%`;

                for(let i = 1; i <= 4; i++) {
                    const indicator = document.getElementById(`step-${i}-indicator`);
                    if (i <= currentStep) {
                        indicator.classList.remove('opacity-40');
                        indicator.classList.add('font-bold', 'text-orange-600');
                    } else {
                         indicator.classList.add('opacity-40');
                         indicator.classList.remove('font-bold', 'text-orange-600');
                    }
                }
                
                stepIndicatorText.textContent = encouragingMessages[currentStep] || '';

                prevBtn.disabled = currentStep === 0;
                
                if (currentStep === 0) {
                    nextBtn.textContent = 'Começar';
                } else if (currentStep === totalStepsForProgress) {
                    generateSummary();
                    navButtons.style.display = 'none';
                } else if (currentStep > totalStepsForProgress) {
                    navButtons.style.display = 'none';
                } else {
                    navButtons.style.display = 'flex';
                    nextBtn.textContent = 'Avançar';
                }
            }
            
            const fieldLabels = {
                'unidade_nome': 'Nome da unidade', 'unidade_porte': 'Porte da unidade', 'unidade_atendimentos': 'Média de atendimentos/dia', 'unidade_turnos': 'Turnos', 'unidade_consultorios': 'Consultórios por turno',
                'equipe_medicos': 'Total de médicos', 'equipe_outros': 'Outros profissionais', 'equipe_familiaridade': 'Familiaridade com tecnologia',
                'infra_computadores': 'Possui computadores?', 'infra_processo_atual': 'Processo de plantão atual', 'infra_ti': 'Equipe de TI',
                'desafios_gargalo': 'Maior gargalo/risco', 'desafios_problema_um': 'Principal problema a resolver', 'desafios_objetivos': 'Objetivos com a solução'
            };

            function getFormData() { return new FormData(document.getElementById('briefing-form')); }

            function generateSummary() {
                const summaryContainer = document.getElementById('summary');
                const formData = getFormData();
                let summaryHTML = '';
                for (let [key, value] of formData.entries()) {
                    if (value && fieldLabels[key]) {
                        summaryHTML += `<div class="flex flex-col sm:flex-row"><p class="font-semibold text-blue-900 w-full sm:w-1/3">${fieldLabels[key]}:</p><p class="text-slate-700 w-full sm:w-2/3 break-words">${value}</p></div>`;
                    }
                }
                summaryContainer.innerHTML = summaryHTML || '<p class="text-slate-500">Nenhuma informação fornecida.</p>';
            }

            function generateMessageBody() {
                const formData = getFormData();
                let message = `*Diagnóstico Estratégico - JM Analytics*\n\n`;
                message += `*Realizado em:* ${new Date().toLocaleString('pt-BR')}\n`;
                let currentSection = '';
                const sections = {
                    'unidade_nome': '1. ESTRUTURA DA UNIDADE', 'equipe_medicos': '2. EQUIPE E USUÁRIOS',
                    'infra_computadores': '3. INFRAESTRUTURA ATUAL', 'desafios_gargalo': '4. DESAFIOS E OBJETIVOS'
                };
                for (let [key, value] of formData.entries()) {
                    if (value && fieldLabels[key]) {
                        if (sections[key] && sections[key] !== currentSection) {
                            currentSection = sections[key];
                            message += `\n--- *${currentSection}* ---\n`;
                        }
                        message += `*${fieldLabels[key]}:*\n${value}\n\n`;
                    }
                }
                return message;
            }

            sendBtn.addEventListener('click', () => {
                const message = generateMessageBody();
                const whatsappBody = encodeURIComponent(message);
                whatsappLink.href = `https://wa.me/${JM_ANALYTICS_WHATSAPP}?text=${whatsappBody}`;
                sendBtn.style.display = 'none';
                sendOptions.classList.remove('hidden');
            });
            
            sendOptions.addEventListener('click', () => {
                 setTimeout(() => { currentStep++; updateFormView(); }, 500);
            });

            nextBtn.addEventListener('click', () => {
                if (currentStep <= totalStepsForProgress) { currentStep++; updateFormView(); }
            });

            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    if(currentStep === totalStepsForProgress) {
                         navButtons.style.display = 'flex';
                         sendBtn.style.display = 'block';
                         sendOptions.classList.add('hidden');
                    }
                    currentStep--;
                    updateFormView();
                }
            });

            updateFormView();
        });
    </script>
</body>
</html>
